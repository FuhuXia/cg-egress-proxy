# TODO
# - For staging/prod:
#   - Log successful attempts
#   - Log unsuccessful attempts
# - For development:
#   - Add test Dockerfile/directory to compose, similar to what Aaron did for Logstash
#   - curl tests can just run in the container, and reference localhost for the proxy!
#   - Then run with `docker-compose exec caddy test``

{
	debug
    log {
		format console
        level INFO
	}
    auto_https off
}

:{$PROXY_LISTENPORT}
route {
	forward_proxy {
		basic_auth {$PROXY_USERNAME} {$PROXY_PASSWORD}
		acl {
            deny_file  deny.acl
            allow_file allow.acl
            deny all
		}
		ports 80 443 22
	}
}
tls cert.pem key.pem
